function genApi(n,t,i){var w=n.parent(),e,o,u,r,s,h,c,y,p,l,a,f,v;for(n.remove(),n.addClass("main"),e=$("<div/>").addClass("main_title").html(i.Documentation),n.append(e),o=$("<div/>").addClass("main_body"),n.append(o),u=$("<div/>").addClass("main_directory"),o.append(u),r=$("<div/>").addClass("main_method"),o.append(r),s=$("<div/>").attr("id","method_div_top"),r.append(s),h=$("<div/>").attr("id","list_button"),e.append(h),c=$("<div/>").attr("id","user_div"),e.append(c),y=$("<label/>").attr("title","当前用户").tipsy({fade:!0}),p=$("<div/>").attr("id","user_button"),c.append(p).append(y).hide(),h.click(function(){$(u).is(":animated")||$(r).is(":animated")||(u.is(":visible")?u.fadeOut("fast",function(){r.animate({width:"100%"},"fast")}):r.animate({width:"75%"},"fast",function(){u.fadeIn("fast",function(){})}))}),l=$("<ul/>"),u.append(l),a=i.Methods.length,f=0,v=0;v<a;v++)t.delay(0),t.queue(function(){var u=i.Methods[f],e=$("<div/>").addClass("method_div").attr("id","mid_"+u.Name),o,h;genMethod(e,u,f);r.append(e);o=$("<div/>").text(u.Name).click(function(){var n=r.find("#mid_"+u.Name).offset().top-s.offset().top;r.animate({scrollTop:n},120)});h=$("<li/>").append(o).attr("title",u.Documentation).tipsy({fade:!0,gravity:"s"});l.append(h);++f;t.dequeue();f==a&&(t.fadeOut("fast"),w.append(n),refreshUser())})}function refreshUser(){$.ajax({url:window.location.pathname+"/special-user",type:"POST",success:function(n){var t=n.User,i=$("#user_div"),r=i.children("label:last");t!=null&&t.IsAuthenticated?(r.text(t.Name),i.show()):(r.text(""),i.hide())}})}function genMethod(n,t,i){var o=window.location.pathname+"/"+t.Name,h=$("<div/>").addClass("method_title"),c,r,l,s,f,u,e,a,y,p;if(h.append($("<div/>").html(i+1+". "+t.Documentation)),c=$("<div/>"),h.append(c),r=$("<form target='_blank' method='POST'/>").attr("action",o).data("origin_url",o),t.NeedAuth&&(l=$("<span class='lock'/>").attr("title","此接口需要验证").tipsy({fade:!0}),r.append(l)),s=$("<input type='submit' value='POST'/>").addClass("post_button").attr("disabled",!0).click(function(){window.setTimeout(function(){refreshUser()},1e3)}),r.append(s),f=$("<a/>").text(o),r.append(f),u=$("<textarea name='C35A353FD50A49E3A4DDF3E2B1DD04D5' spellcheck='false'><\/textarea>").hide(),r.append(u),c.append(r),n.append(h),t.Params.length==0)n.append("<div class='sub_title'>传递参数 无<\/div>"),f.attr("href",o).attr("target","_blank");else{f.attr("href","javascript:void(0)").attr("target","_self");n.append("<div class='sub_title'>传递参数<\/div>");e=$("<div/>");genTable(e,t.Params);n.append(e);f.click(function(){$(u).is(":animated")||(u.is(":visible")?(u.slideUp("fast"),s.attr("disabled",!0)):(u.slideDown("fast"),s.attr("disabled",!1),v()),e.find(".demo_value_cell").animate({width:["toggle","linear"]},"fast"))});a=e.find(".demo_value_input").keyup(v);function v(){for(var n,o={},s=!1,e=0;e<t.Params.length;e++){var u=t.Params[e],f=$(a[e]),n=f.val(),i;try{if(u.Def.Name=="integer"){if(u.Def.CanNull&&n=="")i=null;else if(i=parseInt(n),window.isNaN(i))throw"FormatError: Must be integer";}else if(u.Def.Name=="float"){if(u.Def.CanNull&&n=="")i=null;else if(i=parseFloat(n),window.isNaN(i))throw"FormatError: Must be float";}else u.Def.Name=="boolean"?u.Def.CanNull&&n==""?i=null:(n=n.toLowerCase(),i=n=="false"||n=="no"||n=="0"?!1:Boolean(n)):i=u.Def.Name=="object"||u.Def.Name=="array"?n==""?null:JSON.parse(n):n}catch(h){s=!0;f.addClass("error");f.attr("title",h);continue}f.removeAttr("title");f.removeClass("error");o[u.Name]=i}s||r.children("textarea:first").val(JSON.stringify(o))}}n.append("<div class='sub_title'>返回字段<\/div>");y=n.append("<div><\/div>").children("div:last");genTable(y,t.ResponseParam.Properties);n.append("<div class='sub_title'>返回码说明<\/div>");p=n.append("<div><\/div>").children("div:last");genResponseCodeTable(p,t.ResponseCodes)}function genTable(n,t){var r=n.append("<table border='0' cellspacing='0' cellpadding='0' align='center' class='ptable'><tbody><\/tbody><\/table>").find("tbody:first"),i,u;for(r.append("<tr class='title'><td>字段<\/td><td class='demo_value_cell'>值<\/td><td td width='150'>类型<\/td><td width='75'>可空<\/td><td>说明<\/td><\/tr>"),i=0;i<t.length;i++)u=t[i],genItem(r,u);n.find(".demo_value_cell").hide()}function genItem(n,t){var i=$("<tr/>").addClass("row_item"),e,u,o,c,s,r,h,f,l,a;if(n.append(i),e=$("<td/>").text(t.Name).addClass("name_cell"),i.append(e),u=25*t.Depth,u>0&&e.css("padding-left",function(n,t){var i=parseInt(t);return isFinite(i)?i+u:u}),o=$("<td/>").addClass("demo_value_cell"),i.append(o),t.Depth==0&&(c=$("<input class='demo_value_input' spellcheck='false' type='text'/>").val(t.Def.DemoValue),o.append(c)),s=n.children().length,t.Def.IsArray&&t.SubType!=null&&t.SubType.Def.IsCustomObject&&t.SubType.Properties!=null)for(r=0;r<t.SubType.Properties.length;r++)genItem(n,t.SubType.Properties[r]);else if(t.Properties!=null)for(r=0;r<t.Properties.length;r++)genItem(n,t.Properties[r]);h=n.children().length;t.Def.IsCustomObject?(f=i.append("<td class='type_cell'><span><\/span><\/td>").find("span:last"),genSpanDef(n,f,t.Def,s,h)):t.Def.IsArray&&t.SubType!=null?(f=i.append("<td class='type_cell'>"+t.Def.Name+" of <span><\/span><\/td>").find("span:last"),genSpanDef(n,f,t.SubType.Def,s,h)):i.append("<td class='type_cell'>"+t.Def.Name+"<\/td>");l=$("<td/>").addClass("can_null_cell").text(t.Def.CanNull);i.append(l);a=$("<td/>").addClass("doc_cell").html(t.Documentation);i.append(a)}function genSpanDef(n,t,i,r,u){function f(t,r){var e=n.find("span[tid='"+i.Id+"']"),u,o,f,s;t.hasClass("tid_has_prop")?u=n.children("tr").slice(t.data("start")-1,t.data("end")):(o=e.filter(".tid_has_prop:first"),u=n.children("tr").slice(o.data("start")-1,o.data("end")));f=u.slice(1,u.length);s=u.first();r?(e.addClass("tid_hilight"),s.addClass("row_hilight_bottom"),f.addClass("row_hilight"),f.last().addClass("row_hilight_bottom")):(e.removeClass("tid_hilight"),s.removeClass("row_hilight_bottom"),f.removeClass("row_hilight"),f.last().removeClass("row_hilight_bottom"))}if(t.text(i.Name),t.attr("tid",i.Id),i.IsCustomObject){var e=u-r;e>0&&(t.addClass("tid_has_prop"),t.data("start",r),t.data("end",u));t.hover(function(){f($(this),!0)},function(){f($(this),!1)})}}function genResponseCodeTable(n,t){var f=n.append("<table border='0' cellspacing='0' cellpadding='0' align='center' class='ptable'><tbody><\/tbody><\/table>").find("tbody:first"),u,r,i;for(f.append("<tr class='title'><td>返回码<\/td><td>说明<\/td><\/tr>"),u=0;u<t.length;u++)r=t[u],i=f.append("<tr><\/tr>").children("tr:last"),i.addClass("row_item"),i.append("<td>"+r.Code+"<\/td>"),r.Category==1&&(r.Code==200?i.children("td:last").css("color","green"):i.children("td:last").css("color","red")),r.Description!=null?i.append("<td>"+r.Description+"<\/td>"):i.append("<td><\/td>")}
/*
//# sourceMappingURL=documentation.min.js.map
*/